# Cursor Rules - Auto-load coding guidelines

## Core Principle
Always refer to and follow the coding rules defined in `_ai/coding-rules.md` for every coding task.

## Mandatory Workflow
1. **Before writing any code**: Review the relevant sections of `_ai/coding-rules.md`
2. **Plan first**: Create a 5-10 bullet plan with explicit boundaries
3. **Slice small**: Implement the thinnest vertical slice
4. **Design Summary**: Emit modules, responsibilities, and public APIs after coding
5. **Self-check**: Use the Quick Heuristics from the rules

## Key Rules to Always Follow
- **Simple over Easy**: Single purpose, minimal coupling, clear data flow
- **Compose, don't complect**: Independent parts assembled at edges
- **Split I/O from logic**: No function both fetches and decides business rules
- **Explicit data shapes**: Validate inputs/outputs at boundaries
- **No magic**: All deps imported, versions real, APIs documented

## Shopify-Specific Rules
- Liquid = presentation; logic = JS/services
- Metafields over hardcoded flags
- No domain logic in templates
- OS 2.0 sections are dumb (accept data, render only)
- Verify HMAC before parsing webhooks

## Output Requirements
- Explain choices with 1-3 bullets for non-obvious decisions
- Provide usage examples for each public API
- Include ops notes (env vars, migrations, run commands)
- No invented APIs - stub with TODO if unsure

## Reference
Always consult `_ai/coding-rules.md` for the complete set of rules and examples.
